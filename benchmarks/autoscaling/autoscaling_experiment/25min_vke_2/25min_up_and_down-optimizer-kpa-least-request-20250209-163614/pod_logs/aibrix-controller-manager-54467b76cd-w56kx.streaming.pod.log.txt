W0209 08:36:16.357112       1 cache.go:154] environment variable AIBRIX_POD_METRIC_REFRESH_INTERVAL_MS is not set, using default value: 
I0209 08:36:16.357162       1 cache.go:139] using default refresh interval: 50 ms
I0209 08:36:16.359378       1 main.go:212] "msg"="starting cache" "logger"="setup"
I0209 08:36:16.359393       1 main.go:220] "msg"="using in-cluster configuration" "logger"="setup"
W0209 08:36:16.559835       1 cache.go:154] environment variable PROMETHEUS_ENDPOINT is not set, using default value: 
W0209 08:36:16.559855       1 cache.go:154] environment variable PROMETHEUS_BASIC_AUTH_USERNAME is not set, using default value: 
W0209 08:36:16.559859       1 cache.go:154] environment variable PROMETHEUS_BASIC_AUTH_PASSWORD is not set, using default value: 
I0209 08:36:16.560109       1 podautoscaler_controller.go:129] "Added AIBrix pod-autoscaler-controller successfully"
I0209 08:36:16.560127       1 podautoscaler_controller.go:133] "Run pod-autoscaler-controller periodical syncs successfully"
I0209 08:36:16.564302       1 modelrouter_controller.go:56] "Starting modelrouter controller"
I0209 08:36:16.567936       1 kvcache_controller.go:124] "Finished to add kv-cache-controller"
I0209 08:36:16.567964       1 main.go:257] "msg"="starting manager" "logger"="setup"
I0209 08:36:16.568156       1 server.go:50] "msg"="starting server" "addr"={"IP":"::","Port":8081,"Zone":""} "kind"="health probe"
I0209 08:36:16.668278       1 leaderelection.go:250] attempting to acquire leader lease aibrix-system/aibrix-controller-manager...
I0209 08:36:45.063966       1 leaderelection.go:260] successfully acquired lease aibrix-system/aibrix-controller-manager
I0209 08:36:45.064157       1 controller.go:178] "msg"="Starting EventSource" "controller"="podautoscaler" "controllerGroup"="autoscaling.aibrix.ai" "controllerKind"="PodAutoscaler" "source"="kind source: *v1alpha1.PodAutoscaler"
I0209 08:36:45.064181       1 controller.go:178] "msg"="Starting EventSource" "controller"="podautoscaler" "controllerGroup"="autoscaling.aibrix.ai" "controllerKind"="PodAutoscaler" "source"="kind source: *v2.HorizontalPodAutoscaler"
I0209 08:36:45.064161       1 controller.go:178] "msg"="Starting EventSource" "controller"="rayclusterreplicaset" "controllerGroup"="orchestration.aibrix.ai" "controllerKind"="RayClusterReplicaSet" "source"="kind source: *v1alpha1.RayClusterReplicaSet"
I0209 08:36:45.064213       1 controller.go:178] "msg"="Starting EventSource" "controller"="model-adapter-controller" "controllerGroup"="model.aibrix.ai" "controllerKind"="ModelAdapter" "source"="kind source: *v1alpha1.ModelAdapter"
I0209 08:36:45.064231       1 controller.go:178] "msg"="Starting EventSource" "controller"="model-adapter-controller" "controllerGroup"="model.aibrix.ai" "controllerKind"="ModelAdapter" "source"="kind source: *v1.Service"
I0209 08:36:45.064236       1 controller.go:178] "msg"="Starting EventSource" "controller"="kv-cache-controller" "controllerGroup"="orchestration.aibrix.ai" "controllerKind"="KVCache" "source"="kind source: *v1alpha1.KVCache"
I0209 08:36:45.064194       1 controller.go:178] "msg"="Starting EventSource" "controller"="podautoscaler" "controllerGroup"="autoscaling.aibrix.ai" "controllerKind"="PodAutoscaler" "source"="channel source: 0xc0009d8a00"
I0209 08:36:45.064240       1 controller.go:178] "msg"="Starting EventSource" "controller"="model-adapter-controller" "controllerGroup"="model.aibrix.ai" "controllerKind"="ModelAdapter" "source"="kind source: *v1.EndpointSlice"
I0209 08:36:45.064273       1 controller.go:178] "msg"="Starting EventSource" "controller"="rayclusterreplicaset" "controllerGroup"="orchestration.aibrix.ai" "controllerKind"="RayClusterReplicaSet" "source"="kind source: *v1.RayCluster"
I0209 08:36:45.064285       1 controller.go:186] "msg"="Starting Controller" "controller"="rayclusterreplicaset" "controllerGroup"="orchestration.aibrix.ai" "controllerKind"="RayClusterReplicaSet"
I0209 08:36:45.064276       1 controller.go:178] "msg"="Starting EventSource" "controller"="kv-cache-controller" "controllerGroup"="orchestration.aibrix.ai" "controllerKind"="KVCache" "source"="kind source: *v1.Service"
I0209 08:36:45.064327       1 controller.go:178] "msg"="Starting EventSource" "controller"="kv-cache-controller" "controllerGroup"="orchestration.aibrix.ai" "controllerKind"="KVCache" "source"="kind source: *v1.Deployment"
I0209 08:36:45.064337       1 controller.go:178] "msg"="Starting EventSource" "controller"="kv-cache-controller" "controllerGroup"="orchestration.aibrix.ai" "controllerKind"="KVCache" "source"="kind source: *v1.Pod"
I0209 08:36:45.064340       1 controller.go:186] "msg"="Starting Controller" "controller"="podautoscaler" "controllerGroup"="autoscaling.aibrix.ai" "controllerKind"="PodAutoscaler"
I0209 08:36:45.064345       1 controller.go:186] "msg"="Starting Controller" "controller"="kv-cache-controller" "controllerGroup"="orchestration.aibrix.ai" "controllerKind"="KVCache"
I0209 08:36:45.064327       1 controller.go:178] "msg"="Starting EventSource" "controller"="model-adapter-controller" "controllerGroup"="model.aibrix.ai" "controllerKind"="ModelAdapter" "source"="kind source: *v1.Pod"
I0209 08:36:45.064380       1 controller.go:178] "msg"="Starting EventSource" "controller"="rayclusterfleet" "controllerGroup"="orchestration.aibrix.ai" "controllerKind"="RayClusterFleet" "source"="kind source: *v1alpha1.RayClusterFleet"
I0209 08:36:45.064387       1 controller.go:186] "msg"="Starting Controller" "controller"="model-adapter-controller" "controllerGroup"="model.aibrix.ai" "controllerKind"="ModelAdapter"
I0209 08:36:45.064402       1 controller.go:178] "msg"="Starting EventSource" "controller"="rayclusterfleet" "controllerGroup"="orchestration.aibrix.ai" "controllerKind"="RayClusterFleet" "source"="kind source: *v1alpha1.RayClusterReplicaSet"
I0209 08:36:45.064413       1 controller.go:178] "msg"="Starting EventSource" "controller"="rayclusterfleet" "controllerGroup"="orchestration.aibrix.ai" "controllerKind"="RayClusterFleet" "source"="kind source: *v1.RayCluster"
I0209 08:36:45.064423       1 controller.go:186] "msg"="Starting Controller" "controller"="rayclusterfleet" "controllerGroup"="orchestration.aibrix.ai" "controllerKind"="RayClusterFleet"
I0209 08:36:45.169613       1 controller.go:220] "msg"="Starting workers" "controller"="podautoscaler" "controllerGroup"="autoscaling.aibrix.ai" "controllerKind"="PodAutoscaler" "worker count"=1
I0209 08:36:45.169627       1 controller.go:220] "msg"="Starting workers" "controller"="model-adapter-controller" "controllerGroup"="model.aibrix.ai" "controllerKind"="ModelAdapter" "worker count"=1
I0209 08:36:45.169643       1 controller.go:220] "msg"="Starting workers" "controller"="kv-cache-controller" "controllerGroup"="orchestration.aibrix.ai" "controllerKind"="KVCache" "worker count"=1
I0209 08:36:45.172904       1 controller.go:220] "msg"="Starting workers" "controller"="rayclusterreplicaset" "controllerGroup"="orchestration.aibrix.ai" "controllerKind"="RayClusterReplicaSet" "worker count"=1
I0209 08:36:45.172922       1 controller.go:220] "msg"="Starting workers" "controller"="rayclusterfleet" "controllerGroup"="orchestration.aibrix.ai" "controllerKind"="RayClusterFleet" "worker count"=1
I0209 08:36:45.182068       1 podautoscaler_controller.go:671] "Scaler not found, creating new scaler" metricKey="default/aibrix-model-deepseek-llm-7b-chat" type="KPA"
I0209 08:36:45.182126       1 podautoscaler_controller.go:689] "New scaler added to AutoscalerMap" metricKey="default/aibrix-model-deepseek-llm-7b-chat" type="KPA" spec={"scaleTargetRef":{"kind":"Deployment","name":"aibrix-model-deepseek-llm-7b-chat","apiVersion":"apps/v1"},"minReplicas":1,"maxReplicas":10,"metricsSources":[{"metricSourceType":"domain","protocolType":"http","endpoint":"aibrix-gpu-optimizer.aibrix-system.svc.cluster.local:8080","path":"/metrics/default/deepseek-llm-7b-chat-v100","targetMetric":"vllm:deployment_replicas","targetValue":"1"}],"scalingStrategy":"KPA"}
I0209 08:42:36.586891       1 kpa.go:309] "Begin panicking." panicTime="2025-02-09 08:42:36.586800512 +0000 UTC m=+380.242009673"
I0209 08:42:36.586912       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 08:42:36.586921       1 kpa.go:336] "Increasing pods count." originalPodCount=1 desiredPodCount=2
I0209 08:42:36.602295       1 podautoscaler_controller.go:488] "Successfully rescaled" PodAutoscaler="default/podautoscaler-deepseek-llm-7b-chat-v100-gpu-optimizer" currentReplicas=1 desiredReplicas=2 reason="vllm:deployment_replicas above target"
I0209 08:42:46.587301       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 08:42:56.587966       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 08:43:06.587173       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=1
I0209 08:43:16.586790       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 08:43:26.587933       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=1
I0209 08:43:36.589844       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=1
I0209 08:43:46.586949       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=1
I0209 08:43:56.586707       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=1
I0209 08:44:06.587992       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=1
I0209 08:44:16.587415       1 kpa.go:320] "Exit panicking."
I0209 08:44:16.604054       1 podautoscaler_controller.go:488] "Successfully rescaled" PodAutoscaler="default/podautoscaler-deepseek-llm-7b-chat-v100-gpu-optimizer" currentReplicas=2 desiredReplicas=1 reason="All metrics below target"
I0209 08:44:46.587691       1 kpa.go:309] "Begin panicking." panicTime="2025-02-09 08:44:46.587565049 +0000 UTC m=+510.242774192"
I0209 08:44:46.587710       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 08:44:46.587719       1 kpa.go:336] "Increasing pods count." originalPodCount=1 desiredPodCount=2
I0209 08:44:46.601792       1 podautoscaler_controller.go:488] "Successfully rescaled" PodAutoscaler="default/podautoscaler-deepseek-llm-7b-chat-v100-gpu-optimizer" currentReplicas=1 desiredReplicas=2 reason="vllm:deployment_replicas above target"
I0209 08:44:56.586869       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 08:45:06.588537       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 08:45:16.587154       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 08:45:26.588090       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 08:45:36.586873       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 08:45:46.587723       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 08:45:56.587405       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 08:46:06.588538       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 08:46:16.586897       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 08:46:26.587956       1 kpa.go:330] "Operating in panic mode." desiredPodCount=3 desiredPanicPodCount=3
I0209 08:46:26.587973       1 kpa.go:336] "Increasing pods count." originalPodCount=2 desiredPodCount=3
I0209 08:46:26.603472       1 podautoscaler_controller.go:488] "Successfully rescaled" PodAutoscaler="default/podautoscaler-deepseek-llm-7b-chat-v100-gpu-optimizer" currentReplicas=2 desiredReplicas=3 reason="vllm:deployment_replicas above target"
I0209 08:46:36.587333       1 kpa.go:330] "Operating in panic mode." desiredPodCount=3 desiredPanicPodCount=3
I0209 08:46:46.587638       1 kpa.go:330] "Operating in panic mode." desiredPodCount=3 desiredPanicPodCount=3
I0209 08:46:56.587109       1 kpa.go:330] "Operating in panic mode." desiredPodCount=3 desiredPanicPodCount=2
I0209 08:47:06.587996       1 kpa.go:330] "Operating in panic mode." desiredPodCount=3 desiredPanicPodCount=2
I0209 08:47:16.586909       1 kpa.go:320] "Exit panicking."
I0209 08:47:46.602909       1 podautoscaler_controller.go:488] "Successfully rescaled" PodAutoscaler="default/podautoscaler-deepseek-llm-7b-chat-v100-gpu-optimizer" currentReplicas=3 desiredReplicas=2 reason="All metrics below target"
I0209 08:49:06.608248       1 podautoscaler_controller.go:488] "Successfully rescaled" PodAutoscaler="default/podautoscaler-deepseek-llm-7b-chat-v100-gpu-optimizer" currentReplicas=2 desiredReplicas=1 reason="All metrics below target"
I0209 08:59:26.587776       1 kpa.go:309] "Begin panicking." panicTime="2025-02-09 08:59:26.587692667 +0000 UTC m=+1390.242901831"
I0209 08:59:26.587796       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 08:59:26.587804       1 kpa.go:336] "Increasing pods count." originalPodCount=1 desiredPodCount=2
I0209 08:59:26.604204       1 podautoscaler_controller.go:488] "Successfully rescaled" PodAutoscaler="default/podautoscaler-deepseek-llm-7b-chat-v100-gpu-optimizer" currentReplicas=1 desiredReplicas=2 reason="vllm:deployment_replicas above target"
I0209 08:59:36.587432       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=1
I0209 08:59:46.588240       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 08:59:56.587755       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 09:00:06.586730       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=1
I0209 09:00:16.588600       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=1
I0209 09:00:26.587984       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=1
I0209 09:00:36.587474       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 09:00:46.587554       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=1
I0209 09:00:56.587279       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 09:01:06.588224       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 09:01:16.587384       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 09:01:26.587171       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 09:01:36.588683       1 kpa.go:330] "Operating in panic mode." desiredPodCount=2 desiredPanicPodCount=2
I0209 09:01:46.588066       1 kpa.go:330] "Operating in panic mode." desiredPodCount=3 desiredPanicPodCount=3
I0209 09:01:46.588083       1 kpa.go:336] "Increasing pods count." originalPodCount=2 desiredPodCount=3
I0209 09:01:46.605434       1 podautoscaler_controller.go:488] "Successfully rescaled" PodAutoscaler="default/podautoscaler-deepseek-llm-7b-chat-v100-gpu-optimizer" currentReplicas=2 desiredReplicas=3 reason="vllm:deployment_replicas above target"
I0209 09:01:56.588449       1 kpa.go:320] "Exit panicking."
I0209 09:02:46.603410       1 podautoscaler_controller.go:488] "Successfully rescaled" PodAutoscaler="default/podautoscaler-deepseek-llm-7b-chat-v100-gpu-optimizer" currentReplicas=3 desiredReplicas=2 reason="All metrics below target"
I0209 09:03:36.604260       1 podautoscaler_controller.go:488] "Successfully rescaled" PodAutoscaler="default/podautoscaler-deepseek-llm-7b-chat-v100-gpu-optimizer" currentReplicas=2 desiredReplicas=1 reason="All metrics below target"
